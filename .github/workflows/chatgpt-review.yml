name: OpenAI Code Review

on:
    pull_request:
        types: [opened, synchronize]

jobs:
    review:
        permissions: write-all # Check permission when leave comment action failed
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3
            - name: OpenAI PR Review
              with:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                  OPENAI_API_KEY: ${{ secrets.OPEN_API_KEY }}
                  LANGUAGE: "english"
              uses: detectiveCrow/ai-review-action@latest
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                  OPENAI_API_KEY: ${{ secrets.OPEN_API_KEY }}
                  LANGUAGE: "english"
                  MODEL: "gpt-3.5-turbo"
